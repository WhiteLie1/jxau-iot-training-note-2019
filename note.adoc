:toc:
:imagesdir: ./images

== Linux

https://jaywcjlove.gitee.io/linux-command[命令手册]

=== Ubuntu安装VMwareTools

[TIP]
====
声明：此方法适合初学小白使用，高手请自动略过。
====

出这个文档的意义：

1. 自己搞了好久没搞定，出现了很多问题，总是安装失败，百度了好久

2. 通过自己的实践和百度，找到了方法。给自己提个醒。

3. 帮助更多和我一样的小白解决问题！

第一步：点击你们的虚拟机名字，右击的，点击安装 VMware Tools

image:vmware tools-setting.png[vmware tools-setting.png]

第二步：复制 VMware Tools 安装包到 home 目录

在此页面的下方会有一个安装 VMware Tools 的提示，点击进入，在 Ubuntu 系统桌面上面创建一个光盘的图标，表明将这个安装文件已经放进来了

image:vmware tools-tar.png[vmware tools-tar.png]

双击点进去这个光盘，里面有一个这个文件 [点击并拖拽以移动] ，为了好操作，你直接把这个文件复制或者剪切到主目录下面，也就是 home 目录，如下图所示：

image:vmware tools-home.png[vmware tools-home.png]

第三步：在当前这个目录下打开终端

执行解压目录，解压 VMware Tools 压缩包

注意一下，如果你不是 root 用户登录的，在此命令之前加 `sudo` ,防止出错，这里统一加上

....
sudo tar vzxf VMwareTools-10.1.6-5214329.tar.gz
....

注意：这里 VMware Tools 版本根据自己的型号来定，可以不需要手动打字

直接找到这个文件 [点击并拖拽以移动] 鼠标右击，点击属性，里面有名字，直接复制这个文件名就可以了

然后，你就会看到一大堆代码

第四步：切换到 vmware-tools-distrib 目录

这里有两种方法：

1. 在刚刚执行解压命令的终端 输入 cd vmware-tools-distrib/

2. 找到你刚刚解压的文件夹，就是在你复制的那个主目录下 ，会有一个解压包 [点击并拖拽以移动]

image:vmware tools-distrib.png[vmware tools-distrib.png]

右击，打开终端，就到了这个文件目录下面了

最后执行安装

....
sudo ./vmware-install.pl
....

然后，你需要枯燥了按下 yes 和回车按钮，一直按，知道最后，会出现一个命令：

....
you can enjoy it!
....

恭喜你，安装成功了。

重启虚拟机，点击全屏，如果能显示全屏，则安装成功了，也可以从 Windows 复制文件去 Linux 上了！

== Nginx

link:./pages/build-live-service-with-nginx.adoc[搭建直播服务]

== Git

=== 上传本地代码至Github

为什么要传到 Github 中呢，因为，你用过就会知道有多么美妙了！（By: 陈鑫）

1. 在 Github 中创建一个和自己项目名字一样的仓库

  eg: 我自己创建的就是一个文件夹 demo

2. 打开 Git bash

  在自己本地的项目 demo 文件夹中，在空白处，使用鼠标右键选择 `Git bash here`

3. 初始化 Git 仓库

  git init

4. 添加远程仓库地址

  // 请使用你自己的仓库地址
  git remote add origin https://github.com/WhiteLie1/demo.git    

5. 添加文件至暂存区

  git add -A    // 添加所有文件

6. 提交暂存区的修改（提交至本地）

  git commit -m "Init repo"

7. 将代码推送到远程仓库的 master （主）分支
（前提将项目的.md文件下载到电脑 用 $ git pull --rebase origin master 指令实现）
  git push -u origin master

当远程数据仓库和本体的关联以后就可以进行日常的操作了。

首先呢，一定是在你项目当前的目录下打开 `Git bash here` ,然后你需要做的是：

[source, bash]
----
// 添加所有修改过或新增的文件
git add .

// 查看文件状态
git status

// 提交并说明修改情况
git commit -m "修改了某文件"

/ 推送到远程仓库
git push
----

=== 常见问题

link:./pages/can-not-push-local-repo-to-remote-repo.adoc[无法推送本地仓库到远程仓库（新创建并含有默认的README）]

=== 如何同步更新github上Fork的项目

1.Fork一个项目，比如spring-framework，该操作会复制该项目的所有历史提交内容到个人仓库中，并生成一个相同的项目；
2.Clone之前Fork的项目到本地计算机中；
3.在本地仓库中更新某些文件；
4.提交更新的文件到本地仓库；
5.将本地仓库的更改内容推送push到个人github远程仓库；
6.创建pull请求，既可以同步更新fork的原始项目中别人的更新到自己的github仓库中，也可以提交个人更新的内容到fork的原始项目。

总结：

本文详细讲解了同步更新Github上Fork项目的其中一种方法，还有其他的方法比如可以删除个人github中fork的该项目然后重新fork，这种方式不能合并自己已更新的代码；还有另外一种方式是在本地建立两个仓库，把两个远程库都clone到本地，然后拉取原fork项目更新到本地，合并更新，最后push到你个人的github即可。
附上超级详细的博客链接:
https://www.jianshu.com/p/8ab6ef7ce5e3


== Node.js

=== 更换npm下载源

`npm install` 时巨慢无比，这时可以把下载源换成淘宝的。

[source,bash]
----
npm config set registry https://registry.npm.taobao.org
----

淘宝NPM源官网 -  https://npm.taobao.org

=== Think.js框架

*热更新*

`Think.js` 框架支持热更新操作，保存文件后会自动重新部署，即刻生效，你可以在终端输出中看到相关信息。

而在 `java` 中，针对 `controller` 也就是 `servlet` 的修改操作，需要 `Redelploy` 或者 `Restart` 来使得更改生效，整个过程耗时要长一些。

*数据库安全*

为了防止数据库密码暴露在公开场合，可以将密码设置为环境变量，然后在 `adapter.js` 中使用 `process.env['variable_name']` 调用系统环境变量。

*踩坑*

* 返回数据库数据时，切记使用 `await` 将异步数据库操作改成同步操作，否则无法获取预期的返回值。

[source, js]
----
findAction() {
  let user = this.model().where({ id: id }).find()
  this.json(user)
}
// response => {}

async findAction() {
  let user = await this.model().where({ id: id }).find()
  this.json(user)
}
// response => { user: { ... } }
----

* 更新 `json` 字段的值时，应当传入字符串形式的值。

[source, js]
----
// wrong
model.where( { id： 1 } ).update('{ key: value }')

// true
model.where( { id： 1 } ).update({ key: value })
----

*简单下载功能*

参阅： link:./example/file.js[file.js]

== 微信小程序

=== UI组件库

. https://github.com/Tencent/weui-wxss[weui]
. https://github.com/youzan/vant[vant]

=== 使用Thinkjs和MySQL与小程序通信

[NOTE]
====
这里代码主要以截图为主，多动手,比什么都来的实际！
====

==== 建SQL表

使用命令行或者Navicat工具建表。

这里注意一下：我的数据库名字是 `day712`，建立了一个 `goods_item` 表。后面的测试都基于这个。表的字段属性和相关设置截图都有注释，请自行翻阅。

image:table-describe.png[vmware tools-setting.png]

==== Thinkjs测试代码

首先在 `controller` 里面新建一个 `mesqltest.js`  数据库测试文件。这里注意把 `database` 改成自己的数据库名字。然后密码改成自己的就行了。

image:database-code.png[vmware tools-setting.png]



==== 微信前端交互

我这里是把商城页面的所有商品图片、售价和库存放入数据库。

首先在自己想要测试的 `demo` 里面，往 `.js` 里面加入商品列表。

如下图所示，我在 `data` 里面放了一个 `goodsList` 来接收数据。

image:good-lists.png[good-lists.png]

重点来了，这里设置 `url` 地址，来访问 `thinkjs` 后台的地址，实现数据交互功能。

image:onload-code.png[onliad-code.png]

[NOTE]
====
这个 `url` 地址并不是 `localhost:8360/mysqltest`。这个地址要是你电脑的动态 ip 地址才行，localhost 可能会无法访问。查询本机 `ip` 在 `cmd` 中输入 `ipconfig` 查询。如果编译出现不合法域名，请在开发工具设置里面勾选不校验合法域名。
====

这里使用一个 `view` 来测试一下能否接收从数据库传过来的东西。

image:goods-use.png[goods-use.png]

`npm start` 启动一下服务端，效果显示如下图：

image:goods-show.png[goods-show.png]

这里说明一下，`wx:for` 和 `{{}}` 的使用请自行查看微信小程序开发文档。

这里的 `{{item.picture_url}}` 里面存放的是我的本地图片存储路径。我的图片存在 `image` 文件夹里面。正常路径是 `../../image/goo1.png` 我这里把这个路径存在了数据库中的 `picture_url` 中。直接调用就行，至于图片，不能直接存图片到数据库里面，要先转换成二进制，过于复杂，以后弄懂了再来搞。

微信小程序商城Demo（Thinkjs + MySQL）

https://juejin.im/entry/5af1b16d6fb9a07aca7a20d3

== 数据库

=== MySQL

==== 安装

以 Windows 下 zip 格式的文件（版本5.7）安装为例：

1. 同时按下 WIN + X 键，打开 Powershell（管理员模式）
2. 进入 mysql 目录

  cd 'mysql_dir/bin'

3. 执行初始化操作

  ./mysqld --initialize

4. 搜索 `*.err` 文件，打开后可在最后一行看到默认登陆密码，例如： `A temporarily password has generated for ...`

5. 启动 mysql

  ./mysqld --console

6. 将 `mysql` 的 `bin` 目录添加到 `path` 环境变量（方便在命令行中使用 mysql）

7. 登陆

  mysql -uroot -p

8. 更改密码

  alter user 'root'@localhost identified by 'new password'

官方文档

https://dev.mysql.com/doc/refman/5.7/en/windows-install-archive.html

==== 常见问题

*查看和设置数据库编码*

[source, mysql]
----
# 查看编码
show variables like "%char%"

# 设置编码
set character_set_xxx utf8
----

[NOTE]
====
此方法仅本次有效，下次启动或者登陆时，会加载默认配置
====

* sqlyog 中取消勾选表属性中隐藏语言选项（最右）

  选择字符集为utf8,核对为utf8_general_ci

*在配置文件中设置编码*

在 `mysql` 目录中找到或者创建 `my.ini` 文件，并依据具体情况加入以下内容：

....
[mysqld]
character-set-server=utf8

[client]
default-character-set=utf8

[mysql]
default-character-set=utf8
....

*重启服务*

....
net stop mysql

net start mysql
....

[NOTE]
====
此方法应该不适用于以 `zip` 格式安装的用户
====

*插入中文数据发生错误*

创建表时指定 `utf8` 编码即可。

[source, mysql]
----
create table user (name varchar(20)) default charset=utf8;
----

==== 命令快速参考
创建表

----
// 一般形式
CREATE TABLE table_name (id int primary key auto_increment ... )

// 含外键
CREATE TABLE order (
  id int primary key auto_increment,
  user_id int,
  vendor_id int
  foreign key (user_id) references user(id),
  foreign key (vendor_id) references vendor(id)
)
----

更新字段

  UPDATE user SET name = 'Jack' WHERE id = 1;

删除记录

  DELETE FROM user where id = 1;

删除表

  DROP TABLE user;

更改字段定义

  ALTER TABLE user MODIFY nickname varchar(100) default 'newUser';

增加外键约束

  ALTER TALBE order add foreign key vendor_id references vendor(vendor_id);

=== MongoDB

待补充

== Web开发

推荐网站：

https://developer.mozilla.org/zh-CN[Mozillia Developer Network]

=== CSS

==== 框架列表

. BootStrap
. Bulma
. Spectre

=== JavaScript

==== 框架列表

. Vue.js

*当键值的名称一致时，可采用简写形式。*

[source, js]
----
let userID = 1
let data1 = { userID: userID }    // { userID: 1 }
let data2 = { userID }    // 简写形式，效果与上面相同
----

*可在反引号（`）中引用变量。*

[source, js]
----
let str1 = 'world'
let str2 = 'hello ' + `${str1}`    // result: 'hello world'
----

*严格运算符*

`===` 表示等于

`!==` 表示不等于

[NOTE]
====
请谨慎使用 `===` ，以免造成你意想不到的结果。
====

示例：

我希望从 `cookie` 中取出指定值，对用户进行一个验证。如果该 `cookie` 不存在，则该次访问不合法，否则允许访问。

[source, js]
----
let vendor = this.cookie('vendor')
if (vendor === null || vendor === '')
  return this.fail('invalid access')
return this.success('valid access')
----

现在 `cookie` 中不存在 `vendor`，那么代码变成如下效果：

[source, js]
----
let vendor = undefined
if (undefined === null || undefined === '')    // false
  return this.fail('invalid access')
return this.success('valid access')
----

因为 `undefined === null => false` ，所以不管该 `cookie` 是否存在，最终都会返回成功。

顺带一提 `undefined == null => true` 。

=== HTTP请求调试工具

客户端软件：Postman

浏览器插件：RESTED（支持Chrome，Firefox）


== Python基础

=== 前言

*编译型语言*：先翻译，翻译完毕，再一起执行，比如C语言

*解释型语言*：边翻译边执行，翻译一行，执行一行，比如Python

*速度*：编译型语言比解释型语言执行速度快

*跨平台*：解释型语言比编译型语言跨平台性好

=== 常见错误

==== 手误

例如：`prit("Hello,World!")`

 `NameError: name 'prit' is not defined`

*名称错误：'prit' 名字没有被定义*

==== 多条语句写在同一行

例如：`print("Hello")print("World")`

 `SyntaxError: invalid syntax`

*语法错误：语法无效*

每行代码负责完成一个动作

==== 缩进错误
 `IndentationError: unexpected indent`

*缩进错误*：不期望出现的缩进

Python语言格式很严格，每行代码要对齐

==== 关于中文

使用Python2解释器编译中文会报错

使用Python3解释器可以编译中文

用法  `Python3 文件名.py`
    
==== 交互式运行Python程序

*方法*：在终端中键入python或python3进入python解释器，输入exit()或使用快捷键ctrl+D退出官方解释器。

*优点*：适用于学习/验证Python语法或局部代码。

*缺点*：代码无法保存，不适合运行太大的程序。

==== if判断语句

----
if 判断条件1:
    执行语句1……
elif 判断条件2:
    执行语句2……
elif 判断条件3:
    执行语句3……
else:
    执行语句4……
----

这里需要注意的是，`else` 后面不能跟条件判断语句，不然会报错 `SyntaxError: invalid syntax`

*语法错误：非法语法*

==== List列表

Python 内置的一种 *数据类型* 是列表： list

List 是一个可变的有序表，追加元素到末尾使用 `append()` 方法

----
>>> classmates.append('Adam')
>>> classmates
['Michael', 'Bob', 'Tracy', 'Adam']
----

把元素插入到指定的位置用 `insert()` 方法

----
>>> classmates.insert(1, 'Jack')
>>> classmates
['Michael', 'Jack', 'Bob', 'Tracy', 'Adam']
----

删除 List 末尾的元素，用 `pop()` 方法

----
>>> classmates.pop()
'Adam'
>>> classmates
['Michael', 'Jack', 'Bob', 'Tracy']
----

删除指定位置的元素用 `pop(i)` 方法， i 是索引位置

----
>>> classmates.pop(1)
'Jack'
>>> classmates
['Michael', 'Bob', 'Tracy']
----

替换某个元素，可以直接对相应的索引位置赋值

----
>>> classmates[1] = 'Sarah'
>>> classmates
['Michael', 'Sarah', 'Tracy']
----

List 中的元素数据类型可以不同

----
>>> L = ['Apple', 123, True]
----

List 元素也可以是另一个 List

----
>>> s = ['python', 'java', ['asp', 'php'], 'scheme']
>>> len(s)
4
拆开写就是
>>> p = ['asp', 'php']
>>> s = ['python', 'java', p, 'scheme']
要拿到 'php' 可以写 p[1] 或者 s[2][1] ，因此 s 可以看成一个二维数组
----

==== tuple元组

tuple 与 list 很相似，但是 tuple 一旦初始化就不能再修改

*tuple的陷阱：* 当你定义一个 tuple 时，在定义的时候， tuple 的元素就必须被确定下来，比如：

----
>>> t = (1, 2)
>>> t
(1, 2)
----

如果要定义一个 *空的* tuple，可以写成()：

----
>>> t = ()
>>> t
()
----

但是，要定义一个 *只有1个元素* 的 tuple ，如果你这么定义：

----
>>> t = (1)
>>> t
1
这样定义相当于将t变成了整型数据1
----

定义的不是 tuple，是 1 这个数！这是因为括号()既可以表示 tuple ，又可以表示数学公式中的小括号，这就产生了歧义，因此， Python 规定，这种情况下，按小括号进行计算，计算结果自然是1。

所以，只有1个元素的 tuple 定义时必须加一个逗号,，来消除歧义：

----
>>> t = (1,)
>>> t
(1,)
这样才是tuple型数据
----

Python 在显示只有1个元素的 tuple 时，也会加一个逗号，以免你误解成数学计算意义上的括号。

===== tuple到底变不变

----
>>> t = ('a', 'b', ['A', 'B'])
>>> t[2][0] = 'X'
>>> t[2][1] = 'Y'
>>> t
('a', 'b', ['X', 'Y'])
----

[NOTE]
====
表面上看，tuple的元素确实变了，但其实变的不是tuple的元素，而是list的元素。tuple一开始指向的list并没有改成别的list，所以，tuple所谓的“不变”是说，tuple的每个元素，指向永远不变。即指向'a'，就不能改成指向'b'，指向一个list，就不能改成指向其他对象，但指向的这个list本身是可变的！
====

=== Demo

1.汉若塔问题的实现

[source, python]
----
def hanoi (n,a,b,c):

    if n == 1:
        print(a,'-->',c)
    else:
        hanoi(n-1,a,c,b)
        print(a,'-->',c)
        hanoi(n-1,b,a,c)
        hanoi(3,'A','B','C')
----
== 美化

Windows 下 CMD 和 PowerShell 推荐使用 http://www.downcc.com/font/17200.html[Microsoft Yahei Mono] 字体。

Git bash 可以使用 https://github.com/tonsky/FiraCode/releases[Fira Code] 字体。

VS Code 下推荐 Material Theme，Atom One Dark 之类的主题。

== 提升自我修养

https://github.com/tangx/Stop-Ask-Questions-The-Stupid-Ways[《别像弱智一样提问》]

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/master/README-zh_CN.md[《提问的智慧》]

https://www.zhihu.com/question/60809486[有哪些看似很傻，实则很聪明的行为？]
